NOTE: All paths detailed in this are relative to the root of the artifacts folder.

DORIS Government Publications Portal - Server Setup Instructions

Servers:
	Application Server - 10.155.122.166 (msplvd-recgpp01.csc.nycnet)
	Database Server - 157.188.76.129 (msplvw-recgpp01appdmz.nycnet)
	
NOTE: The database server MUST be running before the application server is setup. The application server relies on Elasticsearch to ensure
that the application is setup correctly.

Database Server Setup Instructions:
Requirements:
	This deployment archive should be extracted in /home/mysql on the database server.
	PLEASE NOTE: The script must be run as a root user on the system

These need to be run as root.

Please run the following commands to run this setup:
	cd /var/lib/mysql
	mkdir -p /home/mysql
	tar xvf /var/lib/mysql/artifacts.tar.gz
	cp -r artifacts/* /home/mysql/artifacts
	cd /home/mysql/artifacts/scripts/db
	source db_server_setup.sh && source es_setup.sh

This script performs the following functions:
	- Updates the system
	- Installs the "Development Tools" group
	- Installs the Python Development Tools and Python Setuptools
	- Installs virtualenv
	- Creates the database credentials for the service accounts
	- Installs expect
	- Installs MySQL, MySQL-Server, and MySQL-Devel
	- Sets up MySQL (using mysql_secure_installation and expect)
	- Creates appropriate users for MySQL, appropriate databases, and sets permissions on those databases
	- Installs the Oracle JDK
		- PLEASE NOTE: Enter 3 and press ENTER
	- Installs Elasticsearch
	- Configures Eleasticsearch
		- Creates a group that gives the local user access to the Elasticsearch configuration
		- Install Elasticsearch Head plugin
	- Creates the Python virtualenv for the indexing script
	- Populates the database
	- Indexes the database using Elasticsearch

###############################################################################
###############################################################################

Application Server Setup Instructions

Please cd into /scripts/app/ and run the following command: source app_server_setup.sh

Requirements:
	This deployment archive should be unzipped in /var/www on the application server.
	PLEASE NOTE: The script mus be run as a root user on the system

This script performs the following functions:
	- Updates the system
	- Installs the "Development Tools" group
	- Installs the Python Development Tools and Python Setuptools
	- Installs zlib-devel, bzip2-devel, openssl-devel, ncurses-devel, mysql-devel, libxml2-devel, libxslt-devel, unixODBC-devel, sqlite, sqlite-devel
	- Installs and configures Nginx
	- Installs and configures uWSGI
	- Installs virtualenv and pip (Python Package Manager)
	- Configures the Government Publications Portal Django Application and associated packages


Memory for ES - 4 GB



